  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (195.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "media-ranker_test"[0m
  [1m[35m (521.8ms)[0m  [1m[35mCREATE DATABASE "media-ranker_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "votes" CASCADE[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "votes" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user_id" bigint, "work_id" bigint, "vote_number" integer)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_votes_on_user_id" ON "votes"  ("user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_votes_on_work_id" ON "votes"  ("work_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "works" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "works" ("id" bigserial primary key, "category" character varying, "title" character varying, "creator" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "publication_year" integer)[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "votes" ADD CONSTRAINT "fk_rails_c9b3bef597"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "votes" ADD CONSTRAINT "fk_rails_18c1007727"
FOREIGN KEY ("work_id")
  REFERENCES "works" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20191016022337)[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20191015021232),
(20191015024625),
(20191015024659),
(20191015025045),
(20191015025324),
(20191015161153),
(20191015161305);

[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-10-16 05:51:15.034415"], ["updated_at", "2019-10-16 05:51:15.034415"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (199.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "media-ranker_test"[0m
  [1m[35m (478.8ms)[0m  [1m[35mCREATE DATABASE "media-ranker_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "votes" CASCADE[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "votes" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user_id" bigint, "work_id" bigint, "vote_count" integer DEFAULT 0)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_votes_on_user_id" ON "votes"  ("user_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_votes_on_work_id" ON "votes"  ("work_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "works" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "works" ("id" bigserial primary key, "category" character varying, "title" character varying, "creator" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "publication_year" integer, "votes_count" integer DEFAULT 0)[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "votes" ADD CONSTRAINT "fk_rails_c9b3bef597"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "votes" ADD CONSTRAINT "fk_rails_18c1007727"
FOREIGN KEY ("work_id")
  REFERENCES "works" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20191017015043)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20191015021232),
(20191015024625),
(20191015024659),
(20191015025045),
(20191015025324),
(20191015161153),
(20191015161305),
(20191016022337),
(20191016231619),
(20191016231811),
(20191017004623),
(20191017014429);

[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-10-17 16:33:58.406278"], ["updated_at", "2019-10-17 16:33:58.406278"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 LIMIT $2[0m  [["title", "test work"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mWork Exists (6.7ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 LIMIT $2[0m  [["title", "test work"], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mWork Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 LIMIT $2[0m  [["title", "test work"], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mWork Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 LIMIT $2[0m  [["title", "test work"], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mWork Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 LIMIT $2[0m  [["title", "test work"], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mWork Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 LIMIT $2[0m  [["title", "test work"], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "works";
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:01:29.014338', '2019-10-18 21:01:29.014338', 1979, 0), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:01:29.014338', '2019-10-18 21:01:29.014338', 1993, 0), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:01:29.014338', '2019-10-18 21:01:29.014338', 2012, 0)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "works";
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:01:48.087123', '2019-10-18 21:01:48.087123', 1979, 0), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:01:48.087123', '2019-10-18 21:01:48.087123', 1993, 0), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:01:48.087123', '2019-10-18 21:01:48.087123', 2012, 0)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "works";
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:02:13.113500', '2019-10-18 21:02:13.113500', 1979, 0), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:02:13.113500', '2019-10-18 21:02:13.113500', 1993, 0), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:02:13.113500', '2019-10-18 21:02:13.113500', 2012, 0)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (161.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "media-ranker_test"[0m
  [1m[35m (495.5ms)[0m  [1m[35mCREATE DATABASE "media-ranker_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "votes" CASCADE[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "votes" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user_id" bigint, "work_id" bigint)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_votes_on_user_id" ON "votes"  ("user_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_votes_on_work_id" ON "votes"  ("work_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "works" CASCADE[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "works" ("id" bigserial primary key, "category" character varying, "title" character varying, "creator" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "publication_year" integer, "votes_count" integer DEFAULT 0)[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "votes" ADD CONSTRAINT "fk_rails_c9b3bef597"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "votes" ADD CONSTRAINT "fk_rails_18c1007727"
FOREIGN KEY ("work_id")
  REFERENCES "works" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20191018212423)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20191015021232),
(20191015024625),
(20191015024659),
(20191015025045),
(20191015025324),
(20191015161153),
(20191015161305),
(20191016022337),
(20191016231619),
(20191016231811),
(20191017004623),
(20191017014429),
(20191017015043);

[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-10-18 21:42:24.350246"], ["updated_at", "2019-10-18 21:42:24.350246"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:42:24.643310', '2019-10-18 21:42:24.643310'), (813006600, 'elizabeth101', '2019-10-18 21:42:24.643310', '2019-10-18 21:42:24.643310'), (1013747353, 'raisah101', '2019-10-18 21:42:24.643310', '2019-10-18 21:42:24.643310'), (541963913, 'kristina101', '2019-10-18 21:42:24.643310', '2019-10-18 21:42:24.643310'), (959135077, 'emily101', '2019-10-18 21:42:24.643310', '2019-10-18 21:42:24.643310');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:42:24.652178', '2019-10-18 21:42:24.652178', NULL, NULL), (273681354, '2019-10-18 21:42:24.652178', '2019-10-18 21:42:24.652178', NULL, NULL), (660028255, '2019-10-18 21:42:24.652178', '2019-10-18 21:42:24.652178', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:42:24.657312', '2019-10-18 21:42:24.657312', 1979, 5), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:42:24.657312', '2019-10-18 21:42:24.657312', 1993, 7), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:42:24.657312', '2019-10-18 21:42:24.657312', 2012, 2)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:43:26.093055', '2019-10-18 21:43:26.093055'), (813006600, 'elizabeth101', '2019-10-18 21:43:26.093055', '2019-10-18 21:43:26.093055'), (1013747353, 'raisah101', '2019-10-18 21:43:26.093055', '2019-10-18 21:43:26.093055'), (541963913, 'kristina101', '2019-10-18 21:43:26.093055', '2019-10-18 21:43:26.093055'), (959135077, 'emily101', '2019-10-18 21:43:26.093055', '2019-10-18 21:43:26.093055');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:43:26.100093', '2019-10-18 21:43:26.100093', NULL, NULL), (273681354, '2019-10-18 21:43:26.100093', '2019-10-18 21:43:26.100093', NULL, NULL), (660028255, '2019-10-18 21:43:26.100093', '2019-10-18 21:43:26.100093', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:43:26.104707', '2019-10-18 21:43:26.104707', 1979, 5), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:43:26.104707', '2019-10-18 21:43:26.104707', 1993, 7), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:43:26.104707', '2019-10-18 21:43:26.104707', 2012, 2)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (1.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:44:00.669324', '2019-10-18 21:44:00.669324'), (813006600, 'elizabeth101', '2019-10-18 21:44:00.669324', '2019-10-18 21:44:00.669324'), (1013747353, 'raisah101', '2019-10-18 21:44:00.669324', '2019-10-18 21:44:00.669324'), (541963913, 'kristina101', '2019-10-18 21:44:00.669324', '2019-10-18 21:44:00.669324'), (959135077, 'emily101', '2019-10-18 21:44:00.669324', '2019-10-18 21:44:00.669324');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:44:00.675335', '2019-10-18 21:44:00.675335', NULL, NULL), (273681354, '2019-10-18 21:44:00.675335', '2019-10-18 21:44:00.675335', NULL, NULL), (660028255, '2019-10-18 21:44:00.675335', '2019-10-18 21:44:00.675335', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:44:00.679236', '2019-10-18 21:44:00.679236', 1979, 5), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:44:00.679236', '2019-10-18 21:44:00.679236', 1993, 7), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:44:00.679236', '2019-10-18 21:44:00.679236', 2012, 2)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:44:10.167738', '2019-10-18 21:44:10.167738'), (813006600, 'elizabeth101', '2019-10-18 21:44:10.167738', '2019-10-18 21:44:10.167738'), (1013747353, 'raisah101', '2019-10-18 21:44:10.167738', '2019-10-18 21:44:10.167738'), (541963913, 'kristina101', '2019-10-18 21:44:10.167738', '2019-10-18 21:44:10.167738'), (959135077, 'emily101', '2019-10-18 21:44:10.167738', '2019-10-18 21:44:10.167738');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:44:10.173766', '2019-10-18 21:44:10.173766', NULL, NULL), (273681354, '2019-10-18 21:44:10.173766', '2019-10-18 21:44:10.173766', NULL, NULL), (660028255, '2019-10-18 21:44:10.173766', '2019-10-18 21:44:10.173766', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:44:10.177841', '2019-10-18 21:44:10.177841', 1979, 5), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:44:10.177841', '2019-10-18 21:44:10.177841', 1993, 7), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:44:10.177841', '2019-10-18 21:44:10.177841', 2012, 2)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:44:55.801329', '2019-10-18 21:44:55.801329'), (813006600, 'elizabeth101', '2019-10-18 21:44:55.801329', '2019-10-18 21:44:55.801329'), (1013747353, 'raisah101', '2019-10-18 21:44:55.801329', '2019-10-18 21:44:55.801329'), (541963913, 'kristina101', '2019-10-18 21:44:55.801329', '2019-10-18 21:44:55.801329'), (959135077, 'emily101', '2019-10-18 21:44:55.801329', '2019-10-18 21:44:55.801329');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:44:55.808739', '2019-10-18 21:44:55.808739', NULL, NULL), (273681354, '2019-10-18 21:44:55.808739', '2019-10-18 21:44:55.808739', NULL, NULL), (660028255, '2019-10-18 21:44:55.808739', '2019-10-18 21:44:55.808739', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:44:55.813749', '2019-10-18 21:44:55.813749', 1979, 5), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:44:55.813749', '2019-10-18 21:44:55.813749', 1993, 7), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:44:55.813749', '2019-10-18 21:44:55.813749', 2012, 2)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.6ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:46:34.981630', '2019-10-18 21:46:34.981630'), (813006600, 'elizabeth101', '2019-10-18 21:46:34.981630', '2019-10-18 21:46:34.981630'), (1013747353, 'raisah101', '2019-10-18 21:46:34.981630', '2019-10-18 21:46:34.981630'), (541963913, 'kristina101', '2019-10-18 21:46:34.981630', '2019-10-18 21:46:34.981630'), (959135077, 'emily101', '2019-10-18 21:46:34.981630', '2019-10-18 21:46:34.981630');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:46:34.988151', '2019-10-18 21:46:34.988151', NULL, NULL), (273681354, '2019-10-18 21:46:34.988151', '2019-10-18 21:46:34.988151', NULL, NULL), (660028255, '2019-10-18 21:46:34.988151', '2019-10-18 21:46:34.988151', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:46:34.992714', '2019-10-18 21:46:34.992714', 1979, 5), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:46:34.992714', '2019-10-18 21:46:34.992714', 1993, 7), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:46:34.992714', '2019-10-18 21:46:34.992714', 2012, 2)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (1.5ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:47:00.530326', '2019-10-18 21:47:00.530326'), (813006600, 'elizabeth101', '2019-10-18 21:47:00.530326', '2019-10-18 21:47:00.530326'), (1013747353, 'raisah101', '2019-10-18 21:47:00.530326', '2019-10-18 21:47:00.530326'), (541963913, 'kristina101', '2019-10-18 21:47:00.530326', '2019-10-18 21:47:00.530326'), (959135077, 'emily101', '2019-10-18 21:47:00.530326', '2019-10-18 21:47:00.530326');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:47:00.538050', '2019-10-18 21:47:00.538050', NULL, NULL), (273681354, '2019-10-18 21:47:00.538050', '2019-10-18 21:47:00.538050', NULL, NULL), (660028255, '2019-10-18 21:47:00.538050', '2019-10-18 21:47:00.538050', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:47:00.542738', '2019-10-18 21:47:00.542738', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:47:00.542738', '2019-10-18 21:47:00.542738', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:47:00.542738', '2019-10-18 21:47:00.542738', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 11]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:47:25.713608', '2019-10-18 21:47:25.713608'), (813006600, 'elizabeth101', '2019-10-18 21:47:25.713608', '2019-10-18 21:47:25.713608'), (1013747353, 'raisah101', '2019-10-18 21:47:25.713608', '2019-10-18 21:47:25.713608'), (541963913, 'kristina101', '2019-10-18 21:47:25.713608', '2019-10-18 21:47:25.713608'), (959135077, 'emily101', '2019-10-18 21:47:25.713608', '2019-10-18 21:47:25.713608');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:47:25.720701', '2019-10-18 21:47:25.720701', NULL, NULL), (273681354, '2019-10-18 21:47:25.720701', '2019-10-18 21:47:25.720701', NULL, NULL), (660028255, '2019-10-18 21:47:25.720701', '2019-10-18 21:47:25.720701', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:47:25.725517', '2019-10-18 21:47:25.725517', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:47:25.725517', '2019-10-18 21:47:25.725517', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:47:25.725517', '2019-10-18 21:47:25.725517', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:48:31.396270', '2019-10-18 21:48:31.396270'), (813006600, 'elizabeth101', '2019-10-18 21:48:31.396270', '2019-10-18 21:48:31.396270'), (1013747353, 'raisah101', '2019-10-18 21:48:31.396270', '2019-10-18 21:48:31.396270'), (541963913, 'kristina101', '2019-10-18 21:48:31.396270', '2019-10-18 21:48:31.396270'), (959135077, 'emily101', '2019-10-18 21:48:31.396270', '2019-10-18 21:48:31.396270');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:48:31.402766', '2019-10-18 21:48:31.402766', NULL, NULL), (273681354, '2019-10-18 21:48:31.402766', '2019-10-18 21:48:31.402766', NULL, NULL), (660028255, '2019-10-18 21:48:31.402766', '2019-10-18 21:48:31.402766', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:48:31.407109', '2019-10-18 21:48:31.407109', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:48:31.407109', '2019-10-18 21:48:31.407109', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:48:31.407109', '2019-10-18 21:48:31.407109', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (1.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:48:52.003041', '2019-10-18 21:48:52.003041'), (813006600, 'elizabeth101', '2019-10-18 21:48:52.003041', '2019-10-18 21:48:52.003041'), (1013747353, 'raisah101', '2019-10-18 21:48:52.003041', '2019-10-18 21:48:52.003041'), (541963913, 'kristina101', '2019-10-18 21:48:52.003041', '2019-10-18 21:48:52.003041'), (959135077, 'emily101', '2019-10-18 21:48:52.003041', '2019-10-18 21:48:52.003041');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:48:52.009793', '2019-10-18 21:48:52.009793', NULL, NULL), (273681354, '2019-10-18 21:48:52.009793', '2019-10-18 21:48:52.009793', NULL, NULL), (660028255, '2019-10-18 21:48:52.009793', '2019-10-18 21:48:52.009793', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:48:52.013944', '2019-10-18 21:48:52.013944', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:48:52.013944', '2019-10-18 21:48:52.013944', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:48:52.013944', '2019-10-18 21:48:52.013944', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 11]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:49:27.526511', '2019-10-18 21:49:27.526511'), (813006600, 'elizabeth101', '2019-10-18 21:49:27.526511', '2019-10-18 21:49:27.526511'), (1013747353, 'raisah101', '2019-10-18 21:49:27.526511', '2019-10-18 21:49:27.526511'), (541963913, 'kristina101', '2019-10-18 21:49:27.526511', '2019-10-18 21:49:27.526511'), (959135077, 'emily101', '2019-10-18 21:49:27.526511', '2019-10-18 21:49:27.526511');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:49:27.532702', '2019-10-18 21:49:27.532702', NULL, NULL), (273681354, '2019-10-18 21:49:27.532702', '2019-10-18 21:49:27.532702', NULL, NULL), (660028255, '2019-10-18 21:49:27.532702', '2019-10-18 21:49:27.532702', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:49:27.536870', '2019-10-18 21:49:27.536870', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:49:27.536870', '2019-10-18 21:49:27.536870', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:49:27.536870', '2019-10-18 21:49:27.536870', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:50:12.394954', '2019-10-18 21:50:12.394954'), (813006600, 'elizabeth101', '2019-10-18 21:50:12.394954', '2019-10-18 21:50:12.394954'), (1013747353, 'raisah101', '2019-10-18 21:50:12.394954', '2019-10-18 21:50:12.394954'), (541963913, 'kristina101', '2019-10-18 21:50:12.394954', '2019-10-18 21:50:12.394954'), (959135077, 'emily101', '2019-10-18 21:50:12.394954', '2019-10-18 21:50:12.394954');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:50:12.401165', '2019-10-18 21:50:12.401165', NULL, 547668523), (273681354, '2019-10-18 21:50:12.401165', '2019-10-18 21:50:12.401165', NULL, NULL), (660028255, '2019-10-18 21:50:12.401165', '2019-10-18 21:50:12.401165', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:50:12.405354', '2019-10-18 21:50:12.405354', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:50:12.405354', '2019-10-18 21:50:12.405354', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:50:12.405354', '2019-10-18 21:50:12.405354', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:50:34.230946', '2019-10-18 21:50:34.230946'), (813006600, 'elizabeth101', '2019-10-18 21:50:34.230946', '2019-10-18 21:50:34.230946'), (1013747353, 'raisah101', '2019-10-18 21:50:34.230946', '2019-10-18 21:50:34.230946'), (541963913, 'kristina101', '2019-10-18 21:50:34.230946', '2019-10-18 21:50:34.230946'), (959135077, 'emily101', '2019-10-18 21:50:34.230946', '2019-10-18 21:50:34.230946');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:50:34.237086', '2019-10-18 21:50:34.237086', NULL, 547668523), (273681354, '2019-10-18 21:50:34.237086', '2019-10-18 21:50:34.237086', NULL, NULL), (660028255, '2019-10-18 21:50:34.237086', '2019-10-18 21:50:34.237086', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:50:34.241344', '2019-10-18 21:50:34.241344', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:50:34.241344', '2019-10-18 21:50:34.241344', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:50:34.241344', '2019-10-18 21:50:34.241344', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:51:08.988229', '2019-10-18 21:51:08.988229'), (813006600, 'elizabeth101', '2019-10-18 21:51:08.988229', '2019-10-18 21:51:08.988229'), (1013747353, 'raisah101', '2019-10-18 21:51:08.988229', '2019-10-18 21:51:08.988229'), (541963913, 'kristina101', '2019-10-18 21:51:08.988229', '2019-10-18 21:51:08.988229'), (959135077, 'emily101', '2019-10-18 21:51:08.988229', '2019-10-18 21:51:08.988229');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:51:08.994754', '2019-10-18 21:51:08.994754', NULL, 547668523), (273681354, '2019-10-18 21:51:08.994754', '2019-10-18 21:51:08.994754', NULL, NULL), (660028255, '2019-10-18 21:51:08.994754', '2019-10-18 21:51:08.994754', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:51:08.998975', '2019-10-18 21:51:08.998975', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:51:08.998975', '2019-10-18 21:51:08.998975', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:51:08.998975', '2019-10-18 21:51:08.998975', 2012, 1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:51:38.415357', '2019-10-18 21:51:38.415357'), (813006600, 'elizabeth101', '2019-10-18 21:51:38.415357', '2019-10-18 21:51:38.415357'), (1013747353, 'raisah101', '2019-10-18 21:51:38.415357', '2019-10-18 21:51:38.415357'), (541963913, 'kristina101', '2019-10-18 21:51:38.415357', '2019-10-18 21:51:38.415357'), (959135077, 'emily101', '2019-10-18 21:51:38.415357', '2019-10-18 21:51:38.415357');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:51:38.422248', '2019-10-18 21:51:38.422248', NULL, 547668523), (273681354, '2019-10-18 21:51:38.422248', '2019-10-18 21:51:38.422248', NULL, NULL), (660028255, '2019-10-18 21:51:38.422248', '2019-10-18 21:51:38.422248', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:51:38.427365', '2019-10-18 21:51:38.427365', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:51:38.427365', '2019-10-18 21:51:38.427365', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:51:38.427365', '2019-10-18 21:51:38.427365', 2012, 1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 21:52:11.810011', '2019-10-18 21:52:11.810011'), (813006600, 'elizabeth101', '2019-10-18 21:52:11.810011', '2019-10-18 21:52:11.810011'), (1013747353, 'raisah101', '2019-10-18 21:52:11.810011', '2019-10-18 21:52:11.810011'), (541963913, 'kristina101', '2019-10-18 21:52:11.810011', '2019-10-18 21:52:11.810011'), (959135077, 'emily101', '2019-10-18 21:52:11.810011', '2019-10-18 21:52:11.810011');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 21:52:11.816707', '2019-10-18 21:52:11.816707', NULL, 547668523), (273681354, '2019-10-18 21:52:11.816707', '2019-10-18 21:52:11.816707', NULL, NULL), (660028255, '2019-10-18 21:52:11.816707', '2019-10-18 21:52:11.816707', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 21:52:11.821011', '2019-10-18 21:52:11.821011', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 21:52:11.821011', '2019-10-18 21:52:11.821011', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 21:52:11.821011', '2019-10-18 21:52:11.821011', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:05:03.855062', '2019-10-18 22:05:03.855062'), (813006600, 'elizabeth101', '2019-10-18 22:05:03.855062', '2019-10-18 22:05:03.855062'), (1013747353, 'raisah101', '2019-10-18 22:05:03.855062', '2019-10-18 22:05:03.855062'), (541963913, 'kristina101', '2019-10-18 22:05:03.855062', '2019-10-18 22:05:03.855062'), (959135077, 'emily101', '2019-10-18 22:05:03.855062', '2019-10-18 22:05:03.855062');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:05:03.861420', '2019-10-18 22:05:03.861420', NULL, 547668523), (273681354, '2019-10-18 22:05:03.861420', '2019-10-18 22:05:03.861420', NULL, NULL), (660028255, '2019-10-18 22:05:03.861420', '2019-10-18 22:05:03.861420', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:05:03.865402', '2019-10-18 22:05:03.865402', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:05:03.865402', '2019-10-18 22:05:03.865402', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:05:03.865402', '2019-10-18 22:05:03.865402', 2012, 1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (2.6ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:05:30.714390', '2019-10-18 22:05:30.714390'), (813006600, 'elizabeth101', '2019-10-18 22:05:30.714390', '2019-10-18 22:05:30.714390'), (1013747353, 'raisah101', '2019-10-18 22:05:30.714390', '2019-10-18 22:05:30.714390'), (541963913, 'kristina101', '2019-10-18 22:05:30.714390', '2019-10-18 22:05:30.714390'), (959135077, 'emily101', '2019-10-18 22:05:30.714390', '2019-10-18 22:05:30.714390');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:05:30.720965', '2019-10-18 22:05:30.720965', NULL, 547668523), (273681354, '2019-10-18 22:05:30.720965', '2019-10-18 22:05:30.720965', NULL, NULL), (660028255, '2019-10-18 22:05:30.720965', '2019-10-18 22:05:30.720965', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:05:30.725388', '2019-10-18 22:05:30.725388', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:05:30.725388', '2019-10-18 22:05:30.725388', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:05:30.725388', '2019-10-18 22:05:30.725388', 2012, 1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:05:41.496749', '2019-10-18 22:05:41.496749'), (813006600, 'elizabeth101', '2019-10-18 22:05:41.496749', '2019-10-18 22:05:41.496749'), (1013747353, 'raisah101', '2019-10-18 22:05:41.496749', '2019-10-18 22:05:41.496749'), (541963913, 'kristina101', '2019-10-18 22:05:41.496749', '2019-10-18 22:05:41.496749'), (959135077, 'emily101', '2019-10-18 22:05:41.496749', '2019-10-18 22:05:41.496749');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:05:41.503078', '2019-10-18 22:05:41.503078', NULL, 547668523), (273681354, '2019-10-18 22:05:41.503078', '2019-10-18 22:05:41.503078', NULL, NULL), (660028255, '2019-10-18 22:05:41.503078', '2019-10-18 22:05:41.503078', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:05:41.507260', '2019-10-18 22:05:41.507260', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:05:41.507260', '2019-10-18 22:05:41.507260', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:05:41.507260', '2019-10-18 22:05:41.507260', 2012, 1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 0], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:05:48.878211', '2019-10-18 22:05:48.878211'), (813006600, 'elizabeth101', '2019-10-18 22:05:48.878211', '2019-10-18 22:05:48.878211'), (1013747353, 'raisah101', '2019-10-18 22:05:48.878211', '2019-10-18 22:05:48.878211'), (541963913, 'kristina101', '2019-10-18 22:05:48.878211', '2019-10-18 22:05:48.878211'), (959135077, 'emily101', '2019-10-18 22:05:48.878211', '2019-10-18 22:05:48.878211');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:05:48.884841', '2019-10-18 22:05:48.884841', NULL, 547668523), (273681354, '2019-10-18 22:05:48.884841', '2019-10-18 22:05:48.884841', NULL, NULL), (660028255, '2019-10-18 22:05:48.884841', '2019-10-18 22:05:48.884841', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:05:48.889585', '2019-10-18 22:05:48.889585', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:05:48.889585', '2019-10-18 22:05:48.889585', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:05:48.889585', '2019-10-18 22:05:48.889585', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.5ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 0], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:07:10.505204', '2019-10-18 22:07:10.505204'), (813006600, 'elizabeth101', '2019-10-18 22:07:10.505204', '2019-10-18 22:07:10.505204'), (1013747353, 'raisah101', '2019-10-18 22:07:10.505204', '2019-10-18 22:07:10.505204'), (541963913, 'kristina101', '2019-10-18 22:07:10.505204', '2019-10-18 22:07:10.505204'), (959135077, 'emily101', '2019-10-18 22:07:10.505204', '2019-10-18 22:07:10.505204');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:07:10.511280', '2019-10-18 22:07:10.511280', NULL, 547668523), (273681354, '2019-10-18 22:07:10.511280', '2019-10-18 22:07:10.511280', NULL, NULL), (660028255, '2019-10-18 22:07:10.511280', '2019-10-18 22:07:10.511280', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:07:10.515304', '2019-10-18 22:07:10.515304', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:07:10.515304', '2019-10-18 22:07:10.515304', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:07:10.515304', '2019-10-18 22:07:10.515304', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 0], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (2.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:08:24.689445', '2019-10-18 22:08:24.689445'), (813006600, 'elizabeth101', '2019-10-18 22:08:24.689445', '2019-10-18 22:08:24.689445'), (1013747353, 'raisah101', '2019-10-18 22:08:24.689445', '2019-10-18 22:08:24.689445'), (541963913, 'kristina101', '2019-10-18 22:08:24.689445', '2019-10-18 22:08:24.689445'), (959135077, 'emily101', '2019-10-18 22:08:24.689445', '2019-10-18 22:08:24.689445');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:08:24.696238', '2019-10-18 22:08:24.696238', NULL, 547668523), (273681354, '2019-10-18 22:08:24.696238', '2019-10-18 22:08:24.696238', NULL, NULL), (660028255, '2019-10-18 22:08:24.696238', '2019-10-18 22:08:24.696238', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:08:24.700588', '2019-10-18 22:08:24.700588', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:08:24.700588', '2019-10-18 22:08:24.700588', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:08:24.700588', '2019-10-18 22:08:24.700588', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 0], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:10:01.378095', '2019-10-18 22:10:01.378095'), (813006600, 'elizabeth101', '2019-10-18 22:10:01.378095', '2019-10-18 22:10:01.378095'), (1013747353, 'raisah101', '2019-10-18 22:10:01.378095', '2019-10-18 22:10:01.378095'), (541963913, 'kristina101', '2019-10-18 22:10:01.378095', '2019-10-18 22:10:01.378095'), (959135077, 'emily101', '2019-10-18 22:10:01.378095', '2019-10-18 22:10:01.378095');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:10:01.384273', '2019-10-18 22:10:01.384273', NULL, 547668523), (273681354, '2019-10-18 22:10:01.384273', '2019-10-18 22:10:01.384273', NULL, NULL), (660028255, '2019-10-18 22:10:01.384273', '2019-10-18 22:10:01.384273', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:10:01.388453', '2019-10-18 22:10:01.388453', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:10:01.388453', '2019-10-18 22:10:01.388453', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:10:01.388453', '2019-10-18 22:10:01.388453', 2012, 1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:13:06.367972', '2019-10-18 22:13:06.367972'), (813006600, 'elizabeth101', '2019-10-18 22:13:06.367972', '2019-10-18 22:13:06.367972'), (1013747353, 'raisah101', '2019-10-18 22:13:06.367972', '2019-10-18 22:13:06.367972'), (541963913, 'kristina101', '2019-10-18 22:13:06.367972', '2019-10-18 22:13:06.367972'), (959135077, 'emily101', '2019-10-18 22:13:06.367972', '2019-10-18 22:13:06.367972');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:13:06.374379', '2019-10-18 22:13:06.374379', NULL, 547668523), (273681354, '2019-10-18 22:13:06.374379', '2019-10-18 22:13:06.374379', NULL, NULL), (660028255, '2019-10-18 22:13:06.374379', '2019-10-18 22:13:06.374379', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:13:06.378697', '2019-10-18 22:13:06.378697', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:13:06.378697', '2019-10-18 22:13:06.378697', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:13:06.378697', '2019-10-18 22:13:06.378697', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:13:23.055719', '2019-10-18 22:13:23.055719'), (813006600, 'elizabeth101', '2019-10-18 22:13:23.055719', '2019-10-18 22:13:23.055719'), (1013747353, 'raisah101', '2019-10-18 22:13:23.055719', '2019-10-18 22:13:23.055719'), (541963913, 'kristina101', '2019-10-18 22:13:23.055719', '2019-10-18 22:13:23.055719'), (959135077, 'emily101', '2019-10-18 22:13:23.055719', '2019-10-18 22:13:23.055719');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:13:23.062318', '2019-10-18 22:13:23.062318', NULL, 547668523), (273681354, '2019-10-18 22:13:23.062318', '2019-10-18 22:13:23.062318', NULL, NULL), (660028255, '2019-10-18 22:13:23.062318', '2019-10-18 22:13:23.062318', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:13:23.066452', '2019-10-18 22:13:23.066452', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:13:23.066452', '2019-10-18 22:13:23.066452', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:13:23.066452', '2019-10-18 22:13:23.066452', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:13:47.722751', '2019-10-18 22:13:47.722751'), (813006600, 'elizabeth101', '2019-10-18 22:13:47.722751', '2019-10-18 22:13:47.722751'), (1013747353, 'raisah101', '2019-10-18 22:13:47.722751', '2019-10-18 22:13:47.722751'), (541963913, 'kristina101', '2019-10-18 22:13:47.722751', '2019-10-18 22:13:47.722751'), (959135077, 'emily101', '2019-10-18 22:13:47.722751', '2019-10-18 22:13:47.722751');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:13:47.729418', '2019-10-18 22:13:47.729418', 76086961, 547668523), (273681354, '2019-10-18 22:13:47.729418', '2019-10-18 22:13:47.729418', NULL, NULL), (660028255, '2019-10-18 22:13:47.729418', '2019-10-18 22:13:47.729418', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:13:47.733803', '2019-10-18 22:13:47.733803', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:13:47.733803', '2019-10-18 22:13:47.733803', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:13:47.733803', '2019-10-18 22:13:47.733803', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.8ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:16:24.504141', '2019-10-18 22:16:24.504141'), (813006600, 'elizabeth101', '2019-10-18 22:16:24.504141', '2019-10-18 22:16:24.504141'), (1013747353, 'raisah101', '2019-10-18 22:16:24.504141', '2019-10-18 22:16:24.504141'), (541963913, 'kristina101', '2019-10-18 22:16:24.504141', '2019-10-18 22:16:24.504141'), (959135077, 'emily101', '2019-10-18 22:16:24.504141', '2019-10-18 22:16:24.504141');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:16:24.512322', '2019-10-18 22:16:24.512322', 76086961, 547668523), (273681354, '2019-10-18 22:16:24.512322', '2019-10-18 22:16:24.512322', NULL, NULL), (660028255, '2019-10-18 22:16:24.512322', '2019-10-18 22:16:24.512322', NULL, NULL), (959688446, '2019-10-18 22:16:24.512322', '2019-10-18 22:16:24.512322', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:16:24.516800', '2019-10-18 22:16:24.516800', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:16:24.516800', '2019-10-18 22:16:24.516800', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:16:24.516800', '2019-10-18 22:16:24.516800', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:16:55.394671', '2019-10-18 22:16:55.394671'), (813006600, 'elizabeth101', '2019-10-18 22:16:55.394671', '2019-10-18 22:16:55.394671'), (1013747353, 'raisah101', '2019-10-18 22:16:55.394671', '2019-10-18 22:16:55.394671'), (541963913, 'kristina101', '2019-10-18 22:16:55.394671', '2019-10-18 22:16:55.394671'), (959135077, 'emily101', '2019-10-18 22:16:55.394671', '2019-10-18 22:16:55.394671');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:16:55.400573', '2019-10-18 22:16:55.400573', 76086961, 547668523), (273681354, '2019-10-18 22:16:55.400573', '2019-10-18 22:16:55.400573', NULL, NULL), (660028255, '2019-10-18 22:16:55.400573', '2019-10-18 22:16:55.400573', NULL, NULL), (959688446, '2019-10-18 22:16:55.400573', '2019-10-18 22:16:55.400573', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:16:55.404460', '2019-10-18 22:16:55.404460', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:16:55.404460', '2019-10-18 22:16:55.404460', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:16:55.404460', '2019-10-18 22:16:55.404460', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0001_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-18 22:23:15.160171', '2019-10-18 22:23:15.160171'), (813006600, 'elizabeth101', '2019-10-18 22:23:15.160171', '2019-10-18 22:23:15.160171'), (1013747353, 'raisah101', '2019-10-18 22:23:15.160171', '2019-10-18 22:23:15.160171'), (541963913, 'kristina101', '2019-10-18 22:23:15.160171', '2019-10-18 22:23:15.160171'), (959135077, 'emily101', '2019-10-18 22:23:15.160171', '2019-10-18 22:23:15.160171');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-18 22:23:15.166789', '2019-10-18 22:23:15.166789', 76086961, 547668523), (273681354, '2019-10-18 22:23:15.166789', '2019-10-18 22:23:15.166789', NULL, NULL), (660028255, '2019-10-18 22:23:15.166789', '2019-10-18 22:23:15.166789', NULL, NULL), (959688446, '2019-10-18 22:23:15.166789', '2019-10-18 22:23:15.166789', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-18 22:23:15.171898', '2019-10-18 22:23:15.171898', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-18 22:23:15.171898', '2019-10-18 22:23:15.171898', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-18 22:23:15.171898', '2019-10-18 22:23:15.171898', 2012, 1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["user_id", 76086961], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------
User: test_0001_does a thing
----------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
Vote::relations: test_0001_belongs to a user
--------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
Vote::relations: test_0002_belongs to a work
--------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (5.5ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 05:24:10.482506', '2019-10-20 05:24:10.482506'), (813006600, 'elizabeth101', '2019-10-20 05:24:10.482506', '2019-10-20 05:24:10.482506'), (1013747353, 'raisah101', '2019-10-20 05:24:10.482506', '2019-10-20 05:24:10.482506'), (541963913, 'kristina101', '2019-10-20 05:24:10.482506', '2019-10-20 05:24:10.482506'), (959135077, 'emily101', '2019-10-20 05:24:10.482506', '2019-10-20 05:24:10.482506');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 05:24:10.514023', '2019-10-20 05:24:10.514023', 76086961, 547668523), (273681354, '2019-10-20 05:24:10.514023', '2019-10-20 05:24:10.514023', NULL, NULL), (660028255, '2019-10-20 05:24:10.514023', '2019-10-20 05:24:10.514023', NULL, NULL), (959688446, '2019-10-20 05:24:10.514023', '2019-10-20 05:24:10.514023', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 05:24:10.522816', '2019-10-20 05:24:10.522816', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 05:24:10.522816', '2019-10-20 05:24:10.522816', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 05:24:10.522816', '2019-10-20 05:24:10.522816', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["user_id", 76086961], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (6.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (2.6ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" DESC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
UsersController::current: test_0001_sets session[:user_id], redirects, and responds with success
------------------------------------------------------------------------------------------------
Started POST "/login" for 127.0.0.1 at 2019-10-19 22:24:10 -0700
Processing by UsersController#login as HTML
  Parameters: {"user"=>{"username"=>"morgan"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (6.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 18ms (ActiveRecord: 7.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
UsersController::current: test_0002_sets flash[:error] and redirects when there's no user
-----------------------------------------------------------------------------------------
Started GET "/users/current" for 127.0.0.1 at 2019-10-19 22:24:10 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 18:55:00.436346', '2019-10-20 18:55:00.436346'), (813006600, 'elizabeth101', '2019-10-20 18:55:00.436346', '2019-10-20 18:55:00.436346'), (1013747353, 'raisah101', '2019-10-20 18:55:00.436346', '2019-10-20 18:55:00.436346'), (541963913, 'kristina101', '2019-10-20 18:55:00.436346', '2019-10-20 18:55:00.436346'), (959135077, 'emily101', '2019-10-20 18:55:00.436346', '2019-10-20 18:55:00.436346');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 18:55:00.442600', '2019-10-20 18:55:00.442600', 76086961, 547668523), (273681354, '2019-10-20 18:55:00.442600', '2019-10-20 18:55:00.442600', NULL, NULL), (660028255, '2019-10-20 18:55:00.442600', '2019-10-20 18:55:00.442600', NULL, NULL), (959688446, '2019-10-20 18:55:00.442600', '2019-10-20 18:55:00.442600', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 18:55:00.446826', '2019-10-20 18:55:00.446826', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 18:55:00.446826', '2019-10-20 18:55:00.446826', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 18:55:00.446826', '2019-10-20 18:55:00.446826', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["user_id", 76086961], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
UsersController::current: test_0001_sets session[:user_id], redirects, and responds with success
------------------------------------------------------------------------------------------------
Started POST "/login" for 127.0.0.1 at 2019-10-20 11:55:00 -0700
Processing by UsersController#login as HTML
  Parameters: {"user"=>{"username"=>"morgan"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "morgan"], ["created_at", "2019-10-20 18:55:00.747556"], ["updated_at", "2019-10-20 18:55:00.747556"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 1.3ms)
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 11:55:00 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
UsersController::current: test_0002_sets flash[:error] and redirects when there's no user
-----------------------------------------------------------------------------------------
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 11:55:00 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" DESC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 18:57:37.797386', '2019-10-20 18:57:37.797386'), (813006600, 'elizabeth101', '2019-10-20 18:57:37.797386', '2019-10-20 18:57:37.797386'), (1013747353, 'raisah101', '2019-10-20 18:57:37.797386', '2019-10-20 18:57:37.797386'), (541963913, 'kristina101', '2019-10-20 18:57:37.797386', '2019-10-20 18:57:37.797386'), (959135077, 'emily101', '2019-10-20 18:57:37.797386', '2019-10-20 18:57:37.797386');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 18:57:37.803361', '2019-10-20 18:57:37.803361', 76086961, 547668523), (273681354, '2019-10-20 18:57:37.803361', '2019-10-20 18:57:37.803361', NULL, NULL), (660028255, '2019-10-20 18:57:37.803361', '2019-10-20 18:57:37.803361', NULL, NULL), (959688446, '2019-10-20 18:57:37.803361', '2019-10-20 18:57:37.803361', NULL, 547668523), (238329453, '2019-10-20 18:57:37.803361', '2019-10-20 18:57:37.803361', 76086961, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 18:57:37.807627', '2019-10-20 18:57:37.807627', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 18:57:37.807627', '2019-10-20 18:57:37.807627', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 18:57:37.807627', '2019-10-20 18:57:37.807627', 2012, 1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
UsersController::current: test_0001_sets session[:user_id], redirects, and responds with success
------------------------------------------------------------------------------------------------
Started POST "/login" for 127.0.0.1 at 2019-10-20 11:57:37 -0700
Processing by UsersController#login as HTML
  Parameters: {"user"=>{"username"=>"morgan"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "morgan"], ["created_at", "2019-10-20 18:57:37.853574"], ["updated_at", "2019-10-20 18:57:37.853574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 1.4ms)
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 11:57:37 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
UsersController::current: test_0002_sets flash[:error] and redirects when there's no user
-----------------------------------------------------------------------------------------
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 11:57:37 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["user_id", 76086961], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" DESC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 18:58:00.214649', '2019-10-20 18:58:00.214649'), (813006600, 'elizabeth101', '2019-10-20 18:58:00.214649', '2019-10-20 18:58:00.214649'), (1013747353, 'raisah101', '2019-10-20 18:58:00.214649', '2019-10-20 18:58:00.214649'), (541963913, 'kristina101', '2019-10-20 18:58:00.214649', '2019-10-20 18:58:00.214649'), (959135077, 'emily101', '2019-10-20 18:58:00.214649', '2019-10-20 18:58:00.214649');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 18:58:00.220426', '2019-10-20 18:58:00.220426', 76086961, 547668523), (273681354, '2019-10-20 18:58:00.220426', '2019-10-20 18:58:00.220426', NULL, NULL), (660028255, '2019-10-20 18:58:00.220426', '2019-10-20 18:58:00.220426', NULL, NULL), (959688446, '2019-10-20 18:58:00.220426', '2019-10-20 18:58:00.220426', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 18:58:00.224451', '2019-10-20 18:58:00.224451', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 18:58:00.224451', '2019-10-20 18:58:00.224451', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 18:58:00.224451', '2019-10-20 18:58:00.224451', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" DESC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
UsersController::current: test_0001_sets session[:user_id], redirects, and responds with success
------------------------------------------------------------------------------------------------
Started POST "/login" for 127.0.0.1 at 2019-10-20 11:58:00 -0700
Processing by UsersController#login as HTML
  Parameters: {"user"=>{"username"=>"morgan"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "morgan"], ["created_at", "2019-10-20 18:58:00.461509"], ["updated_at", "2019-10-20 18:58:00.461509"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 11:58:00 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
UsersController::current: test_0002_sets flash[:error] and redirects when there's no user
-----------------------------------------------------------------------------------------
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 11:58:00 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["user_id", 76086961], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 18:58:24.865233', '2019-10-20 18:58:24.865233'), (813006600, 'elizabeth101', '2019-10-20 18:58:24.865233', '2019-10-20 18:58:24.865233'), (1013747353, 'raisah101', '2019-10-20 18:58:24.865233', '2019-10-20 18:58:24.865233'), (541963913, 'kristina101', '2019-10-20 18:58:24.865233', '2019-10-20 18:58:24.865233'), (959135077, 'emily101', '2019-10-20 18:58:24.865233', '2019-10-20 18:58:24.865233');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 18:58:24.871694', '2019-10-20 18:58:24.871694', 76086961, 547668523), (273681354, '2019-10-20 18:58:24.871694', '2019-10-20 18:58:24.871694', NULL, NULL), (660028255, '2019-10-20 18:58:24.871694', '2019-10-20 18:58:24.871694', NULL, NULL), (959688446, '2019-10-20 18:58:24.871694', '2019-10-20 18:58:24.871694', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 18:58:24.875685', '2019-10-20 18:58:24.875685', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 18:58:24.875685', '2019-10-20 18:58:24.875685', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 18:58:24.875685', '2019-10-20 18:58:24.875685', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
UsersController::current: test_0001_sets session[:user_id], redirects, and responds with success
------------------------------------------------------------------------------------------------
Started POST "/login" for 127.0.0.1 at 2019-10-20 11:58:24 -0700
Processing by UsersController#login as HTML
  Parameters: {"user"=>{"username"=>"morgan"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "morgan"], ["created_at", "2019-10-20 18:58:24.922620"], ["updated_at", "2019-10-20 18:58:24.922620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 1.5ms)
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 11:58:24 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
UsersController::current: test_0002_sets flash[:error] and redirects when there's no user
-----------------------------------------------------------------------------------------
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 11:58:24 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" DESC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["user_id", 76086961], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 18:59:21.360193', '2019-10-20 18:59:21.360193'), (813006600, 'elizabeth101', '2019-10-20 18:59:21.360193', '2019-10-20 18:59:21.360193'), (1013747353, 'raisah101', '2019-10-20 18:59:21.360193', '2019-10-20 18:59:21.360193'), (541963913, 'kristina101', '2019-10-20 18:59:21.360193', '2019-10-20 18:59:21.360193'), (959135077, 'emily101', '2019-10-20 18:59:21.360193', '2019-10-20 18:59:21.360193');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 18:59:21.366108', '2019-10-20 18:59:21.366108', 76086961, 547668523), (273681354, '2019-10-20 18:59:21.366108', '2019-10-20 18:59:21.366108', NULL, NULL), (660028255, '2019-10-20 18:59:21.366108', '2019-10-20 18:59:21.366108', NULL, NULL), (959688446, '2019-10-20 18:59:21.366108', '2019-10-20 18:59:21.366108', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 18:59:21.370563', '2019-10-20 18:59:21.370563', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 18:59:21.370563', '2019-10-20 18:59:21.370563', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 18:59:21.370563', '2019-10-20 18:59:21.370563', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" DESC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
UsersController::current: test_0001_sets session[:user_id], redirects, and responds with success
------------------------------------------------------------------------------------------------
Started POST "/login" for 127.0.0.1 at 2019-10-20 11:59:21 -0700
Processing by UsersController#login as HTML
  Parameters: {"user"=>{"username"=>"morgan"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "morgan"], ["created_at", "2019-10-20 18:59:21.596324"], ["updated_at", "2019-10-20 18:59:21.596324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 11:59:21 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
UsersController::current: test_0002_sets flash[:error] and redirects when there's no user
-----------------------------------------------------------------------------------------
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 11:59:21 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["user_id", 76086961], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:00:18.332632', '2019-10-20 19:00:18.332632'), (813006600, 'elizabeth101', '2019-10-20 19:00:18.332632', '2019-10-20 19:00:18.332632'), (1013747353, 'raisah101', '2019-10-20 19:00:18.332632', '2019-10-20 19:00:18.332632'), (541963913, 'kristina101', '2019-10-20 19:00:18.332632', '2019-10-20 19:00:18.332632'), (959135077, 'emily101', '2019-10-20 19:00:18.332632', '2019-10-20 19:00:18.332632');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:00:18.338723', '2019-10-20 19:00:18.338723', 76086961, 547668523), (273681354, '2019-10-20 19:00:18.338723', '2019-10-20 19:00:18.338723', NULL, NULL), (660028255, '2019-10-20 19:00:18.338723', '2019-10-20 19:00:18.338723', NULL, NULL), (959688446, '2019-10-20 19:00:18.338723', '2019-10-20 19:00:18.338723', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:00:18.343086', '2019-10-20 19:00:18.343086', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:00:18.343086', '2019-10-20 19:00:18.343086', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:00:18.343086', '2019-10-20 19:00:18.343086', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["user_id", 76086961], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
UsersController::current: test_0002_sets flash[:error] and redirects when there's no user
-----------------------------------------------------------------------------------------
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 12:00:18 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 8ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
UsersController::current: test_0001_sets session[:user_id], redirects, and responds with success
------------------------------------------------------------------------------------------------
Started POST "/login" for 127.0.0.1 at 2019-10-20 12:00:18 -0700
Processing by UsersController#login as HTML
  Parameters: {"user"=>{"username"=>"morgan"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "morgan"], ["created_at", "2019-10-20 19:00:18.589156"], ["updated_at", "2019-10-20 19:00:18.589156"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 1.2ms)
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 12:00:18 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" DESC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (2.5ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:01:21.426925', '2019-10-20 19:01:21.426925'), (813006600, 'elizabeth101', '2019-10-20 19:01:21.426925', '2019-10-20 19:01:21.426925'), (1013747353, 'raisah101', '2019-10-20 19:01:21.426925', '2019-10-20 19:01:21.426925'), (541963913, 'kristina101', '2019-10-20 19:01:21.426925', '2019-10-20 19:01:21.426925'), (959135077, 'emily101', '2019-10-20 19:01:21.426925', '2019-10-20 19:01:21.426925');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:01:21.433360', '2019-10-20 19:01:21.433360', 76086961, 547668523), (273681354, '2019-10-20 19:01:21.433360', '2019-10-20 19:01:21.433360', NULL, NULL), (660028255, '2019-10-20 19:01:21.433360', '2019-10-20 19:01:21.433360', NULL, NULL), (959688446, '2019-10-20 19:01:21.433360', '2019-10-20 19:01:21.433360', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:01:21.438169', '2019-10-20 19:01:21.438169', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:01:21.438169', '2019-10-20 19:01:21.438169', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:01:21.438169', '2019-10-20 19:01:21.438169', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
UsersController::current: test_0001_sets session[:user_id], redirects, and responds with success
------------------------------------------------------------------------------------------------
Started POST "/login" for 127.0.0.1 at 2019-10-20 12:01:21 -0700
Processing by UsersController#login as HTML
  Parameters: {"user"=>{"username"=>"morgan"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "morgan"], ["created_at", "2019-10-20 19:01:21.679898"], ["updated_at", "2019-10-20 19:01:21.679898"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 1.0ms)
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 12:01:21 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
UsersController::current: test_0002_sets flash[:error] and redirects when there's no user
-----------------------------------------------------------------------------------------
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 12:01:21 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" DESC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:01:32.121719', '2019-10-20 19:01:32.121719'), (813006600, 'elizabeth101', '2019-10-20 19:01:32.121719', '2019-10-20 19:01:32.121719'), (1013747353, 'raisah101', '2019-10-20 19:01:32.121719', '2019-10-20 19:01:32.121719'), (541963913, 'kristina101', '2019-10-20 19:01:32.121719', '2019-10-20 19:01:32.121719'), (959135077, 'emily101', '2019-10-20 19:01:32.121719', '2019-10-20 19:01:32.121719');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:01:32.128808', '2019-10-20 19:01:32.128808', 76086961, 547668523), (273681354, '2019-10-20 19:01:32.128808', '2019-10-20 19:01:32.128808', NULL, NULL), (660028255, '2019-10-20 19:01:32.128808', '2019-10-20 19:01:32.128808', NULL, NULL), (959688446, '2019-10-20 19:01:32.128808', '2019-10-20 19:01:32.128808', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:01:32.133722', '2019-10-20 19:01:32.133722', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:01:32.133722', '2019-10-20 19:01:32.133722', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:01:32.133722', '2019-10-20 19:01:32.133722', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" DESC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
UsersController::current: test_0001_sets session[:user_id], redirects, and responds with success
------------------------------------------------------------------------------------------------
Started POST "/login" for 127.0.0.1 at 2019-10-20 12:01:32 -0700
Processing by UsersController#login as HTML
  Parameters: {"user"=>{"username"=>"morgan"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "morgan"], ["created_at", "2019-10-20 19:01:32.367125"], ["updated_at", "2019-10-20 19:01:32.367125"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 12:01:32 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
UsersController::current: test_0002_sets flash[:error] and redirects when there's no user
-----------------------------------------------------------------------------------------
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 12:01:32 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:01:48.169080', '2019-10-20 19:01:48.169080'), (813006600, 'elizabeth101', '2019-10-20 19:01:48.169080', '2019-10-20 19:01:48.169080'), (1013747353, 'raisah101', '2019-10-20 19:01:48.169080', '2019-10-20 19:01:48.169080'), (541963913, 'kristina101', '2019-10-20 19:01:48.169080', '2019-10-20 19:01:48.169080'), (959135077, 'emily101', '2019-10-20 19:01:48.169080', '2019-10-20 19:01:48.169080');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:01:48.175600', '2019-10-20 19:01:48.175600', 76086961, 547668523), (273681354, '2019-10-20 19:01:48.175600', '2019-10-20 19:01:48.175600', NULL, NULL), (660028255, '2019-10-20 19:01:48.175600', '2019-10-20 19:01:48.175600', NULL, NULL), (959688446, '2019-10-20 19:01:48.175600', '2019-10-20 19:01:48.175600', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:01:48.190461', '2019-10-20 19:01:48.190461', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:01:48.190461', '2019-10-20 19:01:48.190461', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:01:48.190461', '2019-10-20 19:01:48.190461', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" DESC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."id" != $1 AND "votes"."work_id" = $2 LIMIT $3[0m  [["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
UsersController::current: test_0001_sets session[:user_id], redirects, and responds with success
------------------------------------------------------------------------------------------------
Started POST "/login" for 127.0.0.1 at 2019-10-20 12:01:48 -0700
Processing by UsersController#login as HTML
  Parameters: {"user"=>{"username"=>"morgan"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "morgan"], ["created_at", "2019-10-20 19:01:48.372828"], ["updated_at", "2019-10-20 19:01:48.372828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 1.1ms)
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 12:01:48 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
UsersController::current: test_0002_sets flash[:error] and redirects when there's no user
-----------------------------------------------------------------------------------------
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 12:01:48 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:02:36.416381', '2019-10-20 19:02:36.416381'), (813006600, 'elizabeth101', '2019-10-20 19:02:36.416381', '2019-10-20 19:02:36.416381'), (1013747353, 'raisah101', '2019-10-20 19:02:36.416381', '2019-10-20 19:02:36.416381'), (541963913, 'kristina101', '2019-10-20 19:02:36.416381', '2019-10-20 19:02:36.416381'), (959135077, 'emily101', '2019-10-20 19:02:36.416381', '2019-10-20 19:02:36.416381');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:02:36.422547', '2019-10-20 19:02:36.422547', 76086961, 547668523), (273681354, '2019-10-20 19:02:36.422547', '2019-10-20 19:02:36.422547', NULL, NULL), (660028255, '2019-10-20 19:02:36.422547', '2019-10-20 19:02:36.422547', NULL, NULL), (959688446, '2019-10-20 19:02:36.422547', '2019-10-20 19:02:36.422547', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:02:36.426724', '2019-10-20 19:02:36.426724', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:02:36.426724', '2019-10-20 19:02:36.426724', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:02:36.426724', '2019-10-20 19:02:36.426724', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
UsersController::current: test_0001_sets session[:user_id], redirects, and responds with success
------------------------------------------------------------------------------------------------
Started POST "/login" for 127.0.0.1 at 2019-10-20 12:02:36 -0700
Processing by UsersController#login as HTML
  Parameters: {"user"=>{"username"=>"morgan"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "morgan"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "morgan"], ["created_at", "2019-10-20 19:02:36.642145"], ["updated_at", "2019-10-20 19:02:36.642145"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 1.5ms)
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 12:02:36 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
UsersController::current: test_0002_sets flash[:error] and redirects when there's no user
-----------------------------------------------------------------------------------------
Started GET "/users/current" for 127.0.0.1 at 2019-10-20 12:02:36 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"current"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:03:29.721292', '2019-10-20 19:03:29.721292'), (813006600, 'elizabeth101', '2019-10-20 19:03:29.721292', '2019-10-20 19:03:29.721292'), (1013747353, 'raisah101', '2019-10-20 19:03:29.721292', '2019-10-20 19:03:29.721292'), (541963913, 'kristina101', '2019-10-20 19:03:29.721292', '2019-10-20 19:03:29.721292'), (959135077, 'emily101', '2019-10-20 19:03:29.721292', '2019-10-20 19:03:29.721292');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:03:29.727434', '2019-10-20 19:03:29.727434', 76086961, 547668523), (273681354, '2019-10-20 19:03:29.727434', '2019-10-20 19:03:29.727434', NULL, NULL), (660028255, '2019-10-20 19:03:29.727434', '2019-10-20 19:03:29.727434', NULL, NULL), (959688446, '2019-10-20 19:03:29.727434', '2019-10-20 19:03:29.727434', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:03:29.731464', '2019-10-20 19:03:29.731464', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:03:29.731464', '2019-10-20 19:03:29.731464', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:03:29.731464', '2019-10-20 19:03:29.731464', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:04:56.094360', '2019-10-20 19:04:56.094360'), (813006600, 'elizabeth101', '2019-10-20 19:04:56.094360', '2019-10-20 19:04:56.094360'), (1013747353, 'raisah101', '2019-10-20 19:04:56.094360', '2019-10-20 19:04:56.094360'), (541963913, 'kristina101', '2019-10-20 19:04:56.094360', '2019-10-20 19:04:56.094360'), (959135077, 'emily101', '2019-10-20 19:04:56.094360', '2019-10-20 19:04:56.094360');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:04:56.100621', '2019-10-20 19:04:56.100621', 76086961, 547668523), (273681354, '2019-10-20 19:04:56.100621', '2019-10-20 19:04:56.100621', NULL, NULL), (660028255, '2019-10-20 19:04:56.100621', '2019-10-20 19:04:56.100621', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:04:56.104954', '2019-10-20 19:04:56.104954', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:04:56.104954', '2019-10-20 19:04:56.104954', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:04:56.104954', '2019-10-20 19:04:56.104954', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:05:24.440331', '2019-10-20 19:05:24.440331'), (813006600, 'elizabeth101', '2019-10-20 19:05:24.440331', '2019-10-20 19:05:24.440331'), (1013747353, 'raisah101', '2019-10-20 19:05:24.440331', '2019-10-20 19:05:24.440331'), (541963913, 'kristina101', '2019-10-20 19:05:24.440331', '2019-10-20 19:05:24.440331'), (959135077, 'emily101', '2019-10-20 19:05:24.440331', '2019-10-20 19:05:24.440331');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:05:24.446092', '2019-10-20 19:05:24.446092', 76086961, 547668523), (273681354, '2019-10-20 19:05:24.446092', '2019-10-20 19:05:24.446092', NULL, NULL), (660028255, '2019-10-20 19:05:24.446092', '2019-10-20 19:05:24.446092', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:05:24.450138', '2019-10-20 19:05:24.450138', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:05:24.450138', '2019-10-20 19:05:24.450138', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:05:24.450138', '2019-10-20 19:05:24.450138', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:06:22.670770', '2019-10-20 19:06:22.670770'), (813006600, 'elizabeth101', '2019-10-20 19:06:22.670770', '2019-10-20 19:06:22.670770'), (1013747353, 'raisah101', '2019-10-20 19:06:22.670770', '2019-10-20 19:06:22.670770'), (541963913, 'kristina101', '2019-10-20 19:06:22.670770', '2019-10-20 19:06:22.670770'), (959135077, 'emily101', '2019-10-20 19:06:22.670770', '2019-10-20 19:06:22.670770');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:06:22.676612', '2019-10-20 19:06:22.676612', 76086961, 547668523), (273681354, '2019-10-20 19:06:22.676612', '2019-10-20 19:06:22.676612', NULL, NULL), (660028255, '2019-10-20 19:06:22.676612', '2019-10-20 19:06:22.676612', NULL, 547668523), (959688446, '2019-10-20 19:06:22.676612', '2019-10-20 19:06:22.676612', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:06:22.680549', '2019-10-20 19:06:22.680549', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:06:22.680549', '2019-10-20 19:06:22.680549', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:06:22.680549', '2019-10-20 19:06:22.680549', 2012, 1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.5ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.6ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:07:47.276475', '2019-10-20 19:07:47.276475'), (813006600, 'elizabeth101', '2019-10-20 19:07:47.276475', '2019-10-20 19:07:47.276475'), (1013747353, 'raisah101', '2019-10-20 19:07:47.276475', '2019-10-20 19:07:47.276475'), (541963913, 'kristina101', '2019-10-20 19:07:47.276475', '2019-10-20 19:07:47.276475'), (959135077, 'emily101', '2019-10-20 19:07:47.276475', '2019-10-20 19:07:47.276475');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:07:47.283226', '2019-10-20 19:07:47.283226', 76086961, 547668523), (273681354, '2019-10-20 19:07:47.283226', '2019-10-20 19:07:47.283226', NULL, NULL), (660028255, '2019-10-20 19:07:47.283226', '2019-10-20 19:07:47.283226', NULL, 547668523), (959688446, '2019-10-20 19:07:47.283226', '2019-10-20 19:07:47.283226', NULL, NULL), (238329453, '2019-10-20 19:07:47.283226', '2019-10-20 19:07:47.283226', 76086961, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:07:47.287577', '2019-10-20 19:07:47.287577', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:07:47.287577', '2019-10-20 19:07:47.287577', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:07:47.287577', '2019-10-20 19:07:47.287577', 2012, 1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0002_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 238329453], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 238329453], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:08:14.455619', '2019-10-20 19:08:14.455619'), (813006600, 'elizabeth101', '2019-10-20 19:08:14.455619', '2019-10-20 19:08:14.455619'), (1013747353, 'raisah101', '2019-10-20 19:08:14.455619', '2019-10-20 19:08:14.455619'), (541963913, 'kristina101', '2019-10-20 19:08:14.455619', '2019-10-20 19:08:14.455619'), (959135077, 'emily101', '2019-10-20 19:08:14.455619', '2019-10-20 19:08:14.455619');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:08:14.461702', '2019-10-20 19:08:14.461702', 76086961, 547668523), (273681354, '2019-10-20 19:08:14.461702', '2019-10-20 19:08:14.461702', NULL, NULL), (660028255, '2019-10-20 19:08:14.461702', '2019-10-20 19:08:14.461702', NULL, 547668523), (959688446, '2019-10-20 19:08:14.461702', '2019-10-20 19:08:14.461702', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:08:14.466098', '2019-10-20 19:08:14.466098', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:08:14.466098', '2019-10-20 19:08:14.466098', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:08:14.466098', '2019-10-20 19:08:14.466098', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0002_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:08:25.614706', '2019-10-20 19:08:25.614706'), (813006600, 'elizabeth101', '2019-10-20 19:08:25.614706', '2019-10-20 19:08:25.614706'), (1013747353, 'raisah101', '2019-10-20 19:08:25.614706', '2019-10-20 19:08:25.614706'), (541963913, 'kristina101', '2019-10-20 19:08:25.614706', '2019-10-20 19:08:25.614706'), (959135077, 'emily101', '2019-10-20 19:08:25.614706', '2019-10-20 19:08:25.614706');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:08:25.621289', '2019-10-20 19:08:25.621289', 76086961, 547668523), (273681354, '2019-10-20 19:08:25.621289', '2019-10-20 19:08:25.621289', NULL, NULL), (660028255, '2019-10-20 19:08:25.621289', '2019-10-20 19:08:25.621289', NULL, 547668523), (959688446, '2019-10-20 19:08:25.621289', '2019-10-20 19:08:25.621289', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:08:25.625839', '2019-10-20 19:08:25.625839', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:08:25.625839', '2019-10-20 19:08:25.625839', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:08:25.625839', '2019-10-20 19:08:25.625839', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 76086961]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:08:46.834637', '2019-10-20 19:08:46.834637'), (813006600, 'elizabeth101', '2019-10-20 19:08:46.834637', '2019-10-20 19:08:46.834637'), (1013747353, 'raisah101', '2019-10-20 19:08:46.834637', '2019-10-20 19:08:46.834637'), (541963913, 'kristina101', '2019-10-20 19:08:46.834637', '2019-10-20 19:08:46.834637'), (959135077, 'emily101', '2019-10-20 19:08:46.834637', '2019-10-20 19:08:46.834637');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:08:46.840860', '2019-10-20 19:08:46.840860', 76086961, 547668523), (273681354, '2019-10-20 19:08:46.840860', '2019-10-20 19:08:46.840860', NULL, NULL), (660028255, '2019-10-20 19:08:46.840860', '2019-10-20 19:08:46.840860', NULL, 547668523), (959688446, '2019-10-20 19:08:46.840860', '2019-10-20 19:08:46.840860', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:08:46.845057', '2019-10-20 19:08:46.845057', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:08:46.845057', '2019-10-20 19:08:46.845057', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:08:46.845057', '2019-10-20 19:08:46.845057', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 959135077], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 959135077]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.5ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.4ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:08:55.981005', '2019-10-20 19:08:55.981005'), (813006600, 'elizabeth101', '2019-10-20 19:08:55.981005', '2019-10-20 19:08:55.981005'), (1013747353, 'raisah101', '2019-10-20 19:08:55.981005', '2019-10-20 19:08:55.981005'), (541963913, 'kristina101', '2019-10-20 19:08:55.981005', '2019-10-20 19:08:55.981005'), (959135077, 'emily101', '2019-10-20 19:08:55.981005', '2019-10-20 19:08:55.981005');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:08:55.987924', '2019-10-20 19:08:55.987924', 76086961, 547668523), (273681354, '2019-10-20 19:08:55.987924', '2019-10-20 19:08:55.987924', NULL, NULL), (660028255, '2019-10-20 19:08:55.987924', '2019-10-20 19:08:55.987924', NULL, 547668523), (959688446, '2019-10-20 19:08:55.987924', '2019-10-20 19:08:55.987924', NULL, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:08:55.992242', '2019-10-20 19:08:55.992242', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:08:55.992242', '2019-10-20 19:08:55.992242', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:08:55.992242', '2019-10-20 19:08:55.992242', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 959135077], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 959135077]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:09:54.493021', '2019-10-20 19:09:54.493021'), (813006600, 'elizabeth101', '2019-10-20 19:09:54.493021', '2019-10-20 19:09:54.493021'), (1013747353, 'raisah101', '2019-10-20 19:09:54.493021', '2019-10-20 19:09:54.493021'), (541963913, 'kristina101', '2019-10-20 19:09:54.493021', '2019-10-20 19:09:54.493021'), (959135077, 'emily101', '2019-10-20 19:09:54.493021', '2019-10-20 19:09:54.493021');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:09:54.499919', '2019-10-20 19:09:54.499919', 76086961, 547668523), (273681354, '2019-10-20 19:09:54.499919', '2019-10-20 19:09:54.499919', NULL, NULL), (660028255, '2019-10-20 19:09:54.499919', '2019-10-20 19:09:54.499919', NULL, 547668523), (959688446, '2019-10-20 19:09:54.499919', '2019-10-20 19:09:54.499919', NULL, 547668523), (238329453, '2019-10-20 19:09:54.499919', '2019-10-20 19:09:54.499919', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:09:54.504415', '2019-10-20 19:09:54.504415', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:09:54.504415', '2019-10-20 19:09:54.504415', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:09:54.504415', '2019-10-20 19:09:54.504415', 2012, 1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 813006600], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 813006600]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 959688446], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 959688446], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:10:12.827966', '2019-10-20 19:10:12.827966'), (813006600, 'elizabeth101', '2019-10-20 19:10:12.827966', '2019-10-20 19:10:12.827966'), (1013747353, 'raisah101', '2019-10-20 19:10:12.827966', '2019-10-20 19:10:12.827966'), (541963913, 'kristina101', '2019-10-20 19:10:12.827966', '2019-10-20 19:10:12.827966'), (959135077, 'emily101', '2019-10-20 19:10:12.827966', '2019-10-20 19:10:12.827966');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:10:12.834161', '2019-10-20 19:10:12.834161', 76086961, 547668523), (273681354, '2019-10-20 19:10:12.834161', '2019-10-20 19:10:12.834161', NULL, NULL), (660028255, '2019-10-20 19:10:12.834161', '2019-10-20 19:10:12.834161', NULL, 547668523), (238329453, '2019-10-20 19:10:12.834161', '2019-10-20 19:10:12.834161', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:10:12.838563', '2019-10-20 19:10:12.838563', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:10:12.838563', '2019-10-20 19:10:12.838563', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:10:12.838563', '2019-10-20 19:10:12.838563', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 813006600], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 813006600]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:11:36.931299', '2019-10-20 19:11:36.931299'), (813006600, 'elizabeth101', '2019-10-20 19:11:36.931299', '2019-10-20 19:11:36.931299'), (1013747353, 'raisah101', '2019-10-20 19:11:36.931299', '2019-10-20 19:11:36.931299'), (541963913, 'kristina101', '2019-10-20 19:11:36.931299', '2019-10-20 19:11:36.931299'), (959135077, 'emily101', '2019-10-20 19:11:36.931299', '2019-10-20 19:11:36.931299');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:11:36.937429', '2019-10-20 19:11:36.937429', 76086961, 547668523), (273681354, '2019-10-20 19:11:36.937429', '2019-10-20 19:11:36.937429', NULL, NULL), (660028255, '2019-10-20 19:11:36.937429', '2019-10-20 19:11:36.937429', NULL, 547668523), (238329453, '2019-10-20 19:11:36.937429', '2019-10-20 19:11:36.937429', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:11:36.941503', '2019-10-20 19:11:36.941503', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:11:36.941503', '2019-10-20 19:11:36.941503', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:11:36.941503', '2019-10-20 19:11:36.941503', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 813006600], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 813006600]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:11:57.767583', '2019-10-20 19:11:57.767583'), (813006600, 'elizabeth101', '2019-10-20 19:11:57.767583', '2019-10-20 19:11:57.767583'), (1013747353, 'raisah101', '2019-10-20 19:11:57.767583', '2019-10-20 19:11:57.767583'), (541963913, 'kristina101', '2019-10-20 19:11:57.767583', '2019-10-20 19:11:57.767583'), (959135077, 'emily101', '2019-10-20 19:11:57.767583', '2019-10-20 19:11:57.767583');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:11:57.774430', '2019-10-20 19:11:57.774430', 76086961, 547668523), (273681354, '2019-10-20 19:11:57.774430', '2019-10-20 19:11:57.774430', NULL, NULL), (660028255, '2019-10-20 19:11:57.774430', '2019-10-20 19:11:57.774430', NULL, 547668523), (238329453, '2019-10-20 19:11:57.774430', '2019-10-20 19:11:57.774430', NULL, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:11:57.779258', '2019-10-20 19:11:57.779258', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:11:57.779258', '2019-10-20 19:11:57.779258', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:11:57.779258', '2019-10-20 19:11:57.779258', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (1.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 959135077], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 813006600], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 813006600]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:12:48.458209', '2019-10-20 19:12:48.458209'), (813006600, 'elizabeth101', '2019-10-20 19:12:48.458209', '2019-10-20 19:12:48.458209'), (1013747353, 'raisah101', '2019-10-20 19:12:48.458209', '2019-10-20 19:12:48.458209'), (541963913, 'kristina101', '2019-10-20 19:12:48.458209', '2019-10-20 19:12:48.458209'), (959135077, 'emily101', '2019-10-20 19:12:48.458209', '2019-10-20 19:12:48.458209');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:12:48.465814', '2019-10-20 19:12:48.465814', 76086961, 547668523), (273681354, '2019-10-20 19:12:48.465814', '2019-10-20 19:12:48.465814', 813006600, NULL), (660028255, '2019-10-20 19:12:48.465814', '2019-10-20 19:12:48.465814', 959135077, 547668523), (238329453, '2019-10-20 19:12:48.465814', '2019-10-20 19:12:48.465814', 813006600, NULL);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:12:48.470489', '2019-10-20 19:12:48.470489', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:12:48.470489', '2019-10-20 19:12:48.470489', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:12:48.470489', '2019-10-20 19:12:48.470489', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 233266769], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.5ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 238329453], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" IS NULL LIMIT $3[0m  [["user_id", 76086961], ["id", 238329453], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 813006600], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 813006600]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:13:47.771185', '2019-10-20 19:13:47.771185'), (813006600, 'elizabeth101', '2019-10-20 19:13:47.771185', '2019-10-20 19:13:47.771185'), (1013747353, 'raisah101', '2019-10-20 19:13:47.771185', '2019-10-20 19:13:47.771185'), (541963913, 'kristina101', '2019-10-20 19:13:47.771185', '2019-10-20 19:13:47.771185'), (959135077, 'emily101', '2019-10-20 19:13:47.771185', '2019-10-20 19:13:47.771185');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:13:47.778079', '2019-10-20 19:13:47.778079', 76086961, 547668523), (273681354, '2019-10-20 19:13:47.778079', '2019-10-20 19:13:47.778079', 813006600, 233266769), (660028255, '2019-10-20 19:13:47.778079', '2019-10-20 19:13:47.778079', 959135077, 547668523), (238329453, '2019-10-20 19:13:47.778079', '2019-10-20 19:13:47.778079', 813006600, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:13:47.782359', '2019-10-20 19:13:47.782359', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:13:47.782359', '2019-10-20 19:13:47.782359', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:13:47.782359', '2019-10-20 19:13:47.782359', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 813006600], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 813006600]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 238329453], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 238329453], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:14:08.745647', '2019-10-20 19:14:08.745647'), (813006600, 'elizabeth101', '2019-10-20 19:14:08.745647', '2019-10-20 19:14:08.745647'), (1013747353, 'raisah101', '2019-10-20 19:14:08.745647', '2019-10-20 19:14:08.745647'), (541963913, 'kristina101', '2019-10-20 19:14:08.745647', '2019-10-20 19:14:08.745647'), (959135077, 'emily101', '2019-10-20 19:14:08.745647', '2019-10-20 19:14:08.745647');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:14:08.751868', '2019-10-20 19:14:08.751868', 76086961, 547668523), (273681354, '2019-10-20 19:14:08.751868', '2019-10-20 19:14:08.751868', 813006600, 233266769), (660028255, '2019-10-20 19:14:08.751868', '2019-10-20 19:14:08.751868', 959135077, 547668523), (238329453, '2019-10-20 19:14:08.751868', '2019-10-20 19:14:08.751868', 813006600, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:14:08.756581', '2019-10-20 19:14:08.756581', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:14:08.756581', '2019-10-20 19:14:08.756581', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:14:08.756581', '2019-10-20 19:14:08.756581', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 238329453], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 238329453], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 813006600], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 813006600]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "votes";
DELETE FROM "works";
INSERT INTO "users" ("id", "username", "created_at", "updated_at") VALUES (76086961, 'morgan101', '2019-10-20 19:14:21.889827', '2019-10-20 19:14:21.889827'), (813006600, 'elizabeth101', '2019-10-20 19:14:21.889827', '2019-10-20 19:14:21.889827'), (1013747353, 'raisah101', '2019-10-20 19:14:21.889827', '2019-10-20 19:14:21.889827'), (541963913, 'kristina101', '2019-10-20 19:14:21.889827', '2019-10-20 19:14:21.889827'), (959135077, 'emily101', '2019-10-20 19:14:21.889827', '2019-10-20 19:14:21.889827');
INSERT INTO "votes" ("id", "created_at", "updated_at", "user_id", "work_id") VALUES (156850806, '2019-10-20 19:14:21.895981', '2019-10-20 19:14:21.895981', 76086961, 547668523), (273681354, '2019-10-20 19:14:21.895981', '2019-10-20 19:14:21.895981', 813006600, 233266769), (660028255, '2019-10-20 19:14:21.895981', '2019-10-20 19:14:21.895981', 959135077, 547668523), (238329453, '2019-10-20 19:14:21.895981', '2019-10-20 19:14:21.895981', 813006600, 547668523);
INSERT INTO "works" ("id", "category", "title", "creator", "description", "created_at", "updated_at", "publication_year", "votes_count") VALUES (334124624, 'movie', 'forrest gump', 'Hanks', 'run forest', '2019-10-20 19:14:21.899979', '2019-10-20 19:14:21.899979', 1979, 1), (233266769, 'album', 'Parable of the Sower', 'butler', 'Fire drugs?', '2019-10-20 19:14:21.899979', '2019-10-20 19:14:21.899979', 1993, 1), (547668523, 'book', 'Practical Object Oriented Design in Ruby', 'metz', 'A good book on programming', '2019-10-20 19:14:21.899979', '2019-10-20 19:14:21.899979', 2012, 1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0001_belongs to a user
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."user_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["user_id", 76086961], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Vote::relations::relations: test_0002_belongs to a work
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."work_id" = $1 ORDER BY "votes"."id" ASC LIMIT $2[0m  [["work_id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Vote: test_0002_has the required fields
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Vote: test_0001_can be instantiated
-----------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 156850806], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 156850806], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
Vote: test_0003_is invalid if the user_id is repeated
-----------------------------------------------------
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT  "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", 238329453], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" != $2 AND "votes"."work_id" = $3 LIMIT $4[0m  [["user_id", 76086961], ["id", 238329453], ["work_id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "morgan101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
User::validations: test_0002_is invalid without a username
----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND "users"."id" != $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
User::validations: test_0003_is invalid if name is not unique
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76086961], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "elizabeth101"], ["id", 76086961], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
Work::relations: test_0001_has many votes
-----------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 547668523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Practical Object Oriented Design in Ruby"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."id" != $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
Work::validations: test_0003_is invalid if the title is not unique
------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 547668523], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."id" != $2 LIMIT $3[0m  [["title", "Parable of the Sower"], ["id", 547668523], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0002_returns [unknown] if the date is nil
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
ApplicationHelper::helper::readable_date: test_0001_produces a tag with the full timestamp
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::validations::relations: test_0001_can have many votes
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 813006600], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 813006600]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
