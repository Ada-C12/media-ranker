<main>
  <h1> List of Users</h1>

  <section>
    <table class="table table-hover">
      <thead>
        <tr class='table-header'>
          <th scope="col">Username</th>
          <th scope="col">User Since</th>
          <th scope="col">Votes</th>
          <th scope="col">Upvotes</th>
          <th scope="col">Downvotes</th>
        </tr>
      </thead>

      
      <% User.all.order(created_at: :desc).each do |user| %>
          <% total_votes = user.votes %>
          <% upvotes = user.upvotes %>
          <% downvotes = user.downvotes %>
          
          <tr>
            <td><%= link_to user.username, user_path(user.id) %></td>
            <td><%= readable_date(user.created_at) %></td>
            <td><%= total_votes.count if total_votes %></td>
            <td><%= upvotes.count if upvotes %></td>
            <td><%= downvotes.count if downvotes %></td>
          </tr>
      <% end %>
      </tbody>
    </table>
  </section>
</main>