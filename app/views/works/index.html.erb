<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>All Media</title>
  </head>

  <body>
    <main>
      <h2>List of Works</h2>
      <section class="media-table">
        <h4>Albums</h4>
        <table class="table">
          <thead>
            <tr>
              <th width="80" scope="col">Votes</th>
              <th scope="col">Title</th>
              <th scope="col">Created By</th>
              <th width="100" scope="col">Published</th>
              <th scope="col">Upvote</th>
            </tr>
          </thead>
          
          <tbody>
            <%Work.sort_desc("album").each do |work| %>
              <tr>
                <td width="80"><%=work.total_votes%></td>
                <td><%=link_to work.title, work_path(work.id)%></td>
                <td><%=work.creator%></td>  
                <td><%=work.publication_year%></td> 
                <td><%=link_to "Vote", work_votes_path(work.id), method: :post, :class=>"btn btn-primary"%></td>
              </tr>          
            <%end %>
          </tbody>
        </table>
      </section>

      <section class="media-table">
        <h4>Books</h4>
        <table class="table">
          <thead>
            <tr>
              <th width="80" scope="col">Votes</th>
              <th scope="col">Title</th>
              <th scope="col">Created By</th>
              <th width="100" scope="col">Published</th>
              <th scope="col">Upvote</th>
            </tr>
          </thead>
          
          <tbody>
            <%Work.sort_desc("book").each do |work| %>
              <tr>
                <td><%=work.total_votes%></td>
                <td><%= link_to work.title, work_path(work.id)%></td>
                <td><%=work.creator%></td>  
                <td><%=work.publication_year%></td>
                <td><%=link_to "Vote", work_votes_path(work.id), method: :post, :class=>"btn btn-primary"%></td>
              </tr>          
            <%end %>
          </tbody>
        </table>
      </section>

      <section class="media-table">
        <h4>Movies</h4>
        <table class="table">
          <thead>
            <tr>
              <th width="80" scope="col">Votes</th>
              <th scope="col">Title</th>
              <th scope="col">Created By</th>
              <th width="100" scope="col">Published</th>
              <th scope="col">Upvote</th>
            </tr>
          </thead>
          
          <tbody>
            <%Work.sort_desc("movie").each do |work| %>
              <tr>
                <td><%=work.total_votes%></td>
                <td><%=link_to work.title, work_path(work.id)%></td>
                <td><%=work.creator%></td>  
                <td><%=work.publication_year%></td>
                <td><%=link_to "Vote", work_votes_path(work.id), method: :post, :class=>"btn btn-primary"%></td>
              </tr>          
            <%end %>
          </tbody>
        </table>
      </section>

      <%=link_to "View top media", root_path, :class=>"btn btn-secondary"%>
      <%=link_to "Add a new work", new_work_path, :class=>"btn btn-primary"%> 

    </main>
  </body>
</html>
